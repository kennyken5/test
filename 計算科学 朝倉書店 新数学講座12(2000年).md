計算科学　朝倉書店　新数学講座12(2000年).md

本書では、
コンピュータがどのように計算するか、どのように判断するかという原理を具体的に述べ、
暗号のために必要な大きな自然数の素因子分解や、数式処理のときに必要な多項式の素因子分解、
およびネットワークのときに必要なコード理論の数学的原理を書いている。
コンピュータと数学の接点として大切なグレブナー基底について基本的な部分にも触れた。

# 第１章　数の表し表し方　／　２進法。演算回路向を作るときに必要な事柄
節01　２進法
2^10=1024は一千に近いため、Ｋという単位がよく使われる。
問.01.01　十進法表示の整数987を２進法表示に改めよ。
問.01.02　２進法表示の整数1100110011を10進法表示に改めよ。
節02　２の補数表示
節03　算術シフト
ガウス記号　実数αに対し、　n<=α<n+1　となる整数nを[a]と表す。
節04　合同式
２の補数表示で表された２つの数を、足したり引いたりするには？
節05　
節06　

# 第２章　機械語　／　７つの命令。プログラム内蔵方式について
節07　アセンブリ命令
単純なコンピュータを仮に考える。
メモリは8192語（１語１６ビット）がある。2^10=1024、2^13＝8192。
演算装置がある。
演算装置で計算した結果を記録する16ビットのアキュムレータ（Acc）がある。

さて、計算はAccで行われるため、まず番地Ｍの内容16ビットをそのままAccにコピーが必要。
load M と命令しよう。逆に計算結果をAccから番地Ｍに写すにはStore Mと命令だ。
Accの内容に番地Ｍの内容を加えたものをAccに入れるにはAdd Mだ。
引くにはSubstractで。

では、Ａ番地の内容を16倍してその結果をＡに入れるにはどうすればよいか考えよう。

load A
add A
(合計１６回となるようにくり返し)
add A
store A
stop

これでもいいが。次のようにも行える。

Load A　…　x
add A　　…　2x
store A
add A　…　4x
store A
add A　…　8x
store A
add A　…　16x
store A
stop

次に、Ａ番地の内容とＢ番地の内容を交換するにはどうすればよいか考えよう。
Ａ番地の内容をx、Ｂ番地の内容をyとしよう。（A,B、Acc）＝(x,y,0)だ

プログラム５
load A …　AccはＡ番地の値を読み取る　(x,y,0→x)
store B　…　Accは自身の値を番地Ｂに置く　(x,y→x,x)
load B　…　AccはＢ番地の値を読み取る　(x,x,x→x)
store A　…　Accは自身の値を番地Ａに置く　(x→x,x,x)
stop

↑これは失敗である。番地Ｃも使って正しいやり方を書く。番地Ｃの内容はzとする。

プログラム６
load A …　AccはＡ番地の値を読み取る　(x,y,z,0→x)
store C …　Accは自身の値を番地Ｃに置く　(x,y,z→x,x)
load B　…　Accは番地Ｂの値を読み取る　(x,y,x,x→y)
store Ａ …　Accは自身の値を番地Ａに置く　(x→y,y,x,y)
load Ｃ　…　Accは番地Ｃの値を読み取る　(y,y,x,y→x)
store Ｂ …　Accは自身の値を番地Ｂに置く　(y,y→x,x,x)
stop　(y,x,x,x)

これで（A、B＝ｙ、ｘ）となった。

問7.3　Ａ←Ｂ←Ｃ←Ａ、つまり３つの値を入れ替えるプログラムを作れ。

少し技巧的だが、次のプログラム７は番地Ｃを使わずＡＢ入れ替えを行う。

プログラム７　（A,B、Acc）＝(x,y,0)とする
Load Ｂ …　AccはB番地の値を読み取る　(x,y,0→y)
Substract A …　Accは自身の値から番地Ａの値を引く　(x,y,y-x)
store B …　Accは自身の値を番地Ｂに置く　(x,y→y-x,y-x)
add A …　Accは自身の値に番地Ａの値を足す　(x,y-x,(y-x)+x=y)
store A …　Accは自身の値を番地Ａに置く　(x→y,y-x,y)
substruct B …　Accは自身の値から番地Ｂの値を引く　(x→y,y-x,y-（y-x）＝x)
store B …　Accは自身の値を番地Bに置く　(y,y-x→x,x)
stop　(y,x,x)


プログラム８は、Ａ番地の内容の絶対値を番地Ｂに入れる（Ｂ←｜Ａ｜）
jump minus M という命令は、アキュミュレが負のとき、
つまり符号ビットが１のとき、プログラム行の先頭BにＭと書かれた行を飛ぶ。
アキュミュレが正のとき、つまり符号ビットが0のとき、次の命令に進む。
jump Mという命令は、無条件でＭへ飛ぶ。

load A …　Accは番地Ａの値を読みとる。　Accの値は-5
jump minus M …　Accの値がマイナスならラベルＭへ飛ぶ
N:store B …　
stop
M:load Zero …　Accは番地Zeroの値を読む。　Accの値は0に
substruct A …　Accは自身の値に番地Ａの値を引く　Accの値は５に
jump N …　ラベル：Ｎの行は「store B」。これを実行するとAccは自身の値を番地Ｂに。５（番地Ｂに「-5」の絶対値が置かれた）
A -5
B 8
Zero 0

もし、Aが「５」なら、番地Ｂは５となり、番地Ｂに「5」の絶対値が置かれたことになる。

（菊地メモ：足し算命令だけでなく引き算命令がある理由を初めて理解した）

節08　乗法と除法

ふつうのコンピュータはアセンブリ命令の中に乗法や除法を行う命令がある。
しかし、ここで仮に考えられているコンピュータには先にあげた７つの命令のみであるため、
その７つを組み合わせて実現させよう。

乗法
Ａ番地の内容が正の整数x、Ｂ番地が正の整数ｙとする。また、x,y<2^15とする。
xとyをかけることを、xにxをy-1回加える、と置き換える。
y-1回加えたか否かの判定は、番地Ｂにy-2を入れ、１つずつ引き、負になったところで止める。

start:
load A …　Accは番地Ａの値を読みこむ　Acc=x
store C　…　Accは自身の値を番地Ｃに置く。　Ｃは-1からxに
load B　…　Accは番地Ｂの値を読みこむ　Acc=y
substract Two　…　Accは自身の値に番地Twoの値を引く　Acc＝y－２
store B　…　Accは自身の値を番地Ｂに置く。　Ｂはy－２

M:
load B　…　Accはy-2に　／　
jump minus End　…　
load C　…　Acc＝-1　／　
add A　…　Acc＝-1+x＝x-1
store C　…　Ｃはx-1に
load B　…　Accはy-2に
substract  One　…　Accはy-3に
store B　…　Ｂはy-3に
jump M　…　Ｍへ１回目

End:
stop

One 1
Two 2
A x
B y
C -1
　

節09　ユークリッドの互除法

アルゴリズムとはこのユークリッド互除法を指した。
これは有限回で終わり、しかも能率がよい。

自然数xとyが与えられた。dがxの約数(divisor)であり、同時に、dがyの約数であるとき、
dはｘとｙの公約数(common divisor)と言う。
x=d・qと表せば、d<＝d・qであるから、xの約数は有限である。
公約数の中で最大のものを最大公約数(grtatest common divisor)という。

x=y+z　つまり　z=x-y　のとき、
dはzの約数でもある。

ｘから何回もyを引いてゆき、それがyより小さくなるまでおこなう。
これを繰り返す。引き算回数は最大でもx


節10　プログラム内蔵方式

命令が７つしかないので、遠し番号を振ろう。3ビットで足りる。

１　001　load 
２　010　store 
３　011　add 
４　100　subtract 
５　101　stop 
６　110　jump 
７　111　jump minus 

番地は0から2^13-１（＝8191）までなので13ビットで足りる。
よって、ひとつの命令は１語におさまる。

「load　M」という命令も、Ｍは0から8191のどれかである。
M=7としよう。load 7 はアキュムレに７という値を入れるのではなく、
７番地にある内容をアキュムレに入れるのだ・
load 7は、　0010　0000　0000　0111　と記録される。



節11　添え字のあつかい
節12　サブルーチン
節13　制御装置
プログラムカウンタ（ＰＣ）と命令レジスタ

jump M 、　stop M 命令はMそのものをＰＣにコピーしてコンピュータの動きを止める。
それゆえ、再開するとＭから始まる。



# 第３章　論理回路　／　すべて電磁石のみを使って説明
節14　AND　OR　NOT　回路
節15　論理回路
節16　演算回路
節17　符号化回路と解読回路
符号化回路　７つのキーがあり、それを１～７とする。３を押して３という値を得る
解読回路　符号化の逆。通し番号からディスプレイのどの点か解読したり

節18　フリップフロップ
図２３において
Setを１にそしてResetを０にすると、Ｑは１にそして_Ｑは０となる。この状態を１とする。
回路が前行の状態で安定してから、S=R=0としよう。状態は変化するだろうか？
上のＯＲ回路がどうなるかを見よう。Ｄが１であるため、Ｓが０になってもＡは１のままである。
そのため、S＝１とR=0で安定後S=0とR=0にしても、変化はない。

次にSetを０にそしてResetを１にしよう。こうすると先ほどとは反対になり、
Ｑは０にそして_Ｑは１となる。この状態を０とする。
S＝0とR=1による状態０安定後にS=0とR=0としても変化はない。

まとめると、この回路は２つの状態を持っていて、S=R=0であるかぎりその状態を保つ。
Ｑ＝１にしたければｓ＝１にR=0とすればよく、
Ｑ＝０にしたければｓ＝０にR=１とすればよい。
その後にS=R=0としても無変化である。


フリップフロップは状態をふたつ持つ。
フリップフロップ２つつなげ、クロックパルスを用いると、
１ビットの記憶素子として使える。
これをＤ型フリップフロップと呼ぶ（DはDelay遅延が普通だが、本書はDoubleとしている）。
保存されている状態の値がクロックパルスによって押し出されるように出力されるのである。


「Dフリップフロップ」は、
D=1 が入力されると1を記憶して1を出力し、
D=0が入力されると0を記憶して0を出力するフリップフロップです。

他のフリップフロップと異なり、Dフリップフロップは、
出力を決めるときに内部に記憶している現在の状態に依存せずに、
入力だけから決まるという特徴があります。

名称のDは、このフリップフロップを
クロック波形に同期させて動作するように構成した時に
1クロック遅れて出力されることを表す”Delay”をとって、
「Dフリップフロップ」と呼ばれます。
https://engineer-education.com/sequential-circuit_flip-flop/


節19　カウンタ
「Dフリップフロップ」を数珠つなぎにすると、
ｎ進カウンタとなる。

正確で一のなパルスを発する水晶発振器があれば、
カウンタは時刻を計る時計になる。




# 第４章　コンピュータの模型　／　パルスに合わせてコンピュータがどのように命令を実行し、判断を行うか

節20　構成要素
まずコンピュータには心臓がある。パルス発生装置だ。
パルス発生装置は一定のリズムでパルス電流を発生させる。
コンピュータはそのパルスに合わせて動く。
原理的に書くと、図33である（ただし、このまとめに図33は置かない）。

図33の論理回路（logic circuit）はAND、OR、NOT回路で組み立てられて、
入力に対して定まった値を出力するものである。
従ってフリップフロップ（レジスタ）のように保持可能な「状態」を持つものは
通常は論理回路とは呼ばないで順序回路（sequential logic circuit）という。

記憶装置はフリップフロップを内に持つので順序回路である。
n個の記憶素子を持つ記憶装置は2^n個の「状態」を持つ（n個の記憶素子は二進法で0から2^n-1までの整数を表せる）。
この「状態」と外部からの入力値は論理回路を通り、
入力値に応じて定まる値を出力する。

この値はパルスが１にならないかぎり、記憶装置には入ってゆかない。
パルスが発生すると記憶装置の状態を変える。
変わった値はパルス電流が１の間は出力されない。
パルス電流が０になったときから新しい値が出力される。
よって変化した状態は次のパルスのときに使われる。
このようにパルスが発せしたとき。外部からの入力値と、
内部の状態を組み合わせて新しい状態となる。
これがコンピュータの原理的な動作である。
（菊地メモ。図と合わせて読んでも、意味を取れないなぁ）



記憶素子（蓄積素子　storage element）
コンピュータにおいて、記憶装置の基本単位のこと、
あるいは、データを蓄えうる素子のことをいう。
前者は機能上の概念であり、
後者は材料面などの物理的な概念である。
後者の場合では記憶デバイスともいう。

記憶素子（memory device）
コンピュータの回路などで，情報をなんらかの形で記憶させ，あとで読出せる素子をいう。
従来より磁性体による磁心記憶 (コアメモリ) ，フリップフロップ，磁気ドラム，
磁気ディスク，磁気テープなどが用いられているが，
高密度・低消費電力・高速応答などの要求から
MOS型トランジスタあるいは双極型トランジスタによる ICメモリが広く用いられている。
https://kotobank.jp/word/%E8%A8%98%E6%86%B6%E7%B4%A0%E5%AD%90-2593

真理表が書けるのは論理回路である。
フリフロみたいのは順序回路という・

プログラムカウンタは番地解読回路

ーーーーーーーーーーーーーーーーーーーー
スタートする（電源ＯＮ）。
t1パルスが発生する。
プログラムカウンタが番地解読回路で分析される。
その番地の示す記憶装置の内容が命令レジスタにコピーされる。
また同時にプログラムカウンタの値が＋１される。
t2パルスが発生する。
命令レジスタの命令部は命令解読回路で分析され、
番地部は番地解読回路で分析される。
load、store,add。substract命令は演算装置とアキュムレータを使い実行される。
stop M命令はMそのもの（2ビット）をプログラムカウンタに入れ、
同時にパルス発生装置の前にあるフリップフロップを０という状態にする。
jump M命令はＭそのものをプログラムカウンタに入れるだけ。
jump minus M命令はアキュムレータの符号ビットが0のときは何もせず、1のときはMそのものをプログラムカウンタに入れる
次にt1パルスが来るので、プログラムカウンタの示す番地の内容を実行する。

節21　命令読み出し実行

プログラムカウンタは２つのＤ型ＦＦから成る４進カウンタだ。
プログラムカウンタの内容は図38のような番地解読回路とつながっている。
このプログラムカウンタは４進なので１～４の状態を取る。
番地解読回路はそれぞれ記憶装置の１～４番地にあたる部分に繋がっている。
ここで２番に進んだとする。ここはＤ型ＦＦが５つ並ぶだけである。
そして流れ出た内容は命令レジスタに到着する。


節22　命令実行

# 第５章　素因子分解と暗号　／　大きな数の素因数分解をどのようにして行うか

50桁の素因子分解はスパコンでも無理。
1994年、129桁の数が複数多項式２次ふるい法で64桁と65桁の数字に分解されニュースとなった。
1999年、155桁が数体ふるい法で78桁と78桁とに。
また100桁ほどの素数を二つ掛け合わせて作った数の分解は現時点では不可能に近い。

節23　合同式の四則算法
合同算術（ごうどうさんじゅつ、英: modular arithmetic; モジュラ計算）

a≡b (mod n)　「a-bの値がnで割り切れる」
「a and b are congruent modulo n」

この「modulus」は英語でいうと「module／modular」
（モジュール／モジュラー：それぞれ「ユニット部品」「ユニット部品の」の意）」にあたります

整数の合同（ごうどう、英: congruence）
合同式　congruent expression
平方剰余 quadratic residue
 「法に関して」を意味する modulo はラテン語で「測り」を意味する名詞 modulus の奪格である。
 "modulo 12" と書けば、法 12 に準じて考えるという意味になる。
 ガウスは羅: secundum modulum という語を用いた。
 また、羅: Congru は一致するという意味の動詞 congruere の過去分詞形である。
 修飾語「剰余」(residual) は「余りの」という意味である
 「商」(quotient) は同値関係による商集合を指して用いられている


pが3以上の素数で，aはpで割り切れない整数とする。
x^2－aがpで割り切れるような整数xが存在するとき，
aはpの平方剰余であるといい，
このようなxが存在しないとき平方非剰余であるという。

p＝7については，1,2,4は平方剰余，3,5,6は平方非剰余である。
a,bがともに平方剰余のときには，積abも平方剰余であり，
a,bの一方が平方剰余，他方が平方非剰余のとき，abは平方非剰余である。
また，a,bがともに平方非剰余のときにはabは平方剰余である。


第１章の第４節を再び。
２の補数表示で表された数を足す引くするとき、
場合分けで応じるとと複雑化する。そこで見通しよくする試みをする。
-2^15～2^15な数xを2^16を法（module）で表すと
x'
 x=(0 or 0 =< x < 2^15)
 x+2^16(-2^15 =< x < 0)

であるｘ’を２進法で表して１語に入れるとよい。

よって、
ｘ’≡ｘ(mod 2^16)
である

有限体について。
たとえば、偶数全体の類０と奇数全体の類１を考える。
すると、０と１とで加算乗算が得られる。
整数は無限個の元からなるが、有限体ならp個の元しかなくて扱いやすい。


節24　フェルマーの小定理

節25　中国の剰余定理

節26　フェルマーテスト

節27　p-1法

節28　原子根

節29　平方剰余

節30　フェルマー数

節31　メルセンヌ数

節32　アドレマン・ルメリー法

節33　２次ふるい法

節34　楕円曲線法

節35　暗号


# 第６章　多項式の素因子分解　／　整数係数の多項式の素因子分解をコンピュータがいかに自動処理するか
節36　
節37　
節38　
節39　
節40　
節41　
節42　
# 第７章　符号理論　／　誤り訂正符号について。通信網に雑音があっても、少し余裕を込めて情報を送れば復元できる
節43　
節44　
節45　
節46　
# 第８章　グレブナー基底　／　ある集合の中に最小値があるということと、それを求めることとは、まったく別のことである。ユークリッド互除法のようなアルゴリズム
節47　
節48　
節50　
# 付録　平方剰余の相互法則
節Ａ　アイゼンシュタインの判定法
節Ｂ　ガウスの和
節Ｃ　相互法則の証明











