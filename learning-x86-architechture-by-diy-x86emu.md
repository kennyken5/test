# 自作エミュレータで学ぶＸ８６アーキテクチャ

## まえがきから

本筋とは関係なかったが、ＭＤ５０のルールの４１、
最初の行は見出しレベル１でなければならない
が、指摘されてしまった。

以上、あとから挿入したもの。

書籍自作エミュレータで学ぶＸ８６アーキテクチャを読む

全198頁
全４章
chap.1 Ｃ言語とアセンブリ言語（と機械語との諸関係とは？）
chap.2 ポインタとアセンブリ言語（：Ｃのポインタをアセンブリ言語から眺める）
chap.3 ＣＰＵがプログラムを実行する仕組み（：本書の中心をなす。ＨＤＤに書かれたプログラムがどう読み込まれるか）
chap.4 BIOSの仕組みと実機起動

導入

問う。エミュレータ、コンピュータ分野のそれとは何か？
答える。まずそれはソフトウェアのひとつである。
他のハードウェアやソフトウェアを模倣する別のソフトウェアである。
模倣でなけれなエミュではなない。
例えばオリジナルのコピーはエミュではない。

問う。本書の扱うエミュはどのようなものか？
答える。まず、本書が扱わない種類のエミュを説く。
例えば、VirtualBox。いま主流の仮想化方式によるエミュ。
現実ハードウェアのCPUを間借りするものであり、
CPUの動作をソフトウェアでエミュレートするものではないため、
このＣＰＵ間借り方式では、
x86_CPUの上でARM_CPU向けのソフトウェアを動かすことはできない。
しかし、同じx86_CPU向けのソフトウェアであれは高速に動かせる。
ＣＰＵ間借り方式は速度が出せるため実用には適しているが、エミュの学習には不向きである。
したがって、本書が扱うのはＣＰＵ動作をソフトウェアで模倣し、
その上で別のソフトウェアを実行委するＣＰＵエミュである。
ｍ２のｍ68kもそうだね。左はモトローラＣＰＵであり、
本書が扱うのはインテルＣＰＵ。のはず。

問う。ＣＰＵエミュを作る意義は何か？
答える。まず、現実にＣＰＵ制作するのは電子工作である。エミュならはんだごては不要である。
次に、エミュレータ制作を通じてコンピュータの内側を学習できる。
ひとつ。コンピュータを構成する各要素を理解。CPU記憶装置入出力装置など。
ひとつ。機械語とアセンブリ言語の理解。
ひとつ。エミュ制作のためのプログラミング言語の理解。
これらは個別に学ぶこともできるが、ＣＰＵエミュを作るならひとセットで行ける。
コンピュータの低水準な部分を一通りさらえるのである。

問う。本書が扱うＣＰＵの種類は何か？
答える。インテルの８０３８６である。いまのインテルコアの直系祖先であり、
その採用するｘ８６アーキテクチャは、いまのいんてるこあＣＰＵに上位互換。

８ビットである８０８０を１６ビットに拡張したのが８０８６である。
８０８６はＮＥＣのＰＣ９８に採用された。
姉妹品の８０８８はＩＢＭＰＣに採用された。
８０８６の後継が、８０２８６や８０３８６である。
上３つを総称してｘ８６アーキテクチャと呼ぶ。

１９８５年に８０３８６が発売された。ｘ８６アーキテクチャで初の３２ビットＣＰＵである。
３２ビットなので、扱えるメモリ空間は４ＧＢに拡張された。
２００４年にペンティアム４の第３世代インテル６４アーキテクチャまで
パソコン用ＣＰＵデファクトスタンダードとなった。
（テル６４は、ｘ８６－６４とかＡＭＤ６４と呼ばれる）

## chap.1 Ｃ言語とアセンブリ言語
はじめに／言語ｃで書かれたプログラムがアセンブリ言語で書かれたプログラムに変換される様を説明する。
また、アセンブリ言語と機械語の関係性についても説明する。

我々がふつうに書くＣ言語プログラムのファイル形式はテキストファイルである。
ＣＰＵはファイルをバイナリファイルをして読む。

ＣＰＵが解釈できるのはもっと原始的な命令、つまり機械語の列だけを解釈できる。
反対に言うと、ＣＰＵが解釈できる命令こそ機械語と呼べるものである。





## chap.2 ポインタとアセンブリ言語

## chap.3 ＣＰＵがプログラムを実行する仕組み

## chap.4 BIOSの仕組みと実機起動
